!function(t){function e(e){for(var a,i,s=e[0],c=e[1],l=e[2],m=0,d=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(u&&u(e);d.length;)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={popup_main:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()}({0:function(t,e,n){t.exports=n("0a3d")},"08d9":function(t,e,n){},"0a3d":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),o=(n("14d9"),n("13d5"),n("b7ef"),n("da7e")),r=n.n(o);var i={imgBase:"",ttsBase:"audio/",passNum:40,gameTime1:3,gameTime2:6,_estUrl:"",langs:["en","zh","yue"],tips:{en:["no no no","oh sorry.","incorrect","come on."],zh:["继续努力","加油！"],yue:["继续努力","加油！"]},ttslan:{en:"en",zh:"zh",yue:"cte"},url:"https://smlog.github.io/data/dict.js",games:[{_blank:1,name:"pbskids.org games",imgUrl:"https://cms-tc.pbskids.org/global/mezzanines/_shellTopicBlock/Sesame_Puppy-Pet-Care_PBSGameFeature_908x510.jpg",url:"https://pbskids.org/games"},{name:"圈小猫",imgUrl:"images/logo.jpg",path:"cat"},{name:"letter trace",imgUrl:"letter_trace/html/images/cover.jpg",path:"letter_trace/html"},{name:"匹配游戏",path:"card"},{name:"方块消除",imgUrl:"bitmap/logo.png",path:"remove"},{name:"数字推盘",path:"szhrdGame"},{name:"Bubble"},{name:"五子棋",path:"wuziqi"},{name:"五子棋2",path:"wuziqi2"},{name:"unlock"},{name:"connection"},{name:"master_checkers_v3"},{name:"numpuz"},{name:"pintu",imgUrl:"assets/img_480/game_logo.png"},{name:"blue casino",path:"blue2"},{name:"lollipop"},{path:"smarty-bubbles-2",name:"smarty bubbles",imgUrl:"SmartyBubbles2Teaser.jpg"},{name:"ppiano",imgUrl:"PerfectPiano_Teaser.jpg"},{name:"pianoonline"},{path:"pvz",name:"Plant zombie",imgUrl:"images/interface/Logo.jpg",src:"http://crge.cn/games"}]},s=n("ba5f"),c=n("d7ac"),l=n.n(c);const u=n("9d5f"),m=n("0675").LZMA_WORKER;let d={};d.custom="".split(/\n+/).filter(t=>t.trim()).map(t=>t.trim());var p={data:()=>({curIndex:0,enMap:{},transMap:{},showwordlist:0,curItem:null,wordlistTypes:Object.keys(d).sort(),currentWordType:"custom",items:r.a.get("dicts")||[],config:i,page:0,pages:1,pageSize:10,en:"",downTran:0}),mounted(){Object.assign(this.enMap,this.items.reduce((t,e)=>(t[e.en.toLowerCase()]=1,t),{}));let t=this;chrome.runtime.onMessage.addListener((function(e,n,a){e&&"image"==e.contents._page&&e.contents.value&&(a(e),t.curItem.en&&e.contents.value&&(t.curItem.img=e.contents.value,t.save()))})),this.transMap={};for(let t of this.candiates)this.transMap[t.toLowerCase()]={to:"",ph_am:"",ph_en:""}},computed:{candiates(){return d[this.currentWordType]||[]}},watch:{currentWordType(){this.transMap={};for(let t of this.candiates)this.transMap[t.toLowerCase()]={to:"",ph_am:"",ph_en:""}}},methods:{scrollTo(){document.querySelectorAll("#candy li")[this.curIndex].scrollIntoView()},wordlist:()=>d,googleopen(t){window.open(`https://www.google.com/search?q=${encodeURIComponent(t.en)}&tbm=isch`,"googleimage")},printLog(){let t=[];for(let e of this.items)for(let n of this.config.langs){let a=this.config.ttslan[n],o=e[n];t.push(`"${n}/${o.trim()}.mp3" https://fanyi.baidu.com/gettts?lan=${encodeURIComponent(a)}&text=${encodeURIComponent(o.trim())}&spd=3&source=web`)}},upload(){confirm("upload Y?")&&Object(s.b)(null,{cmd:"upload",content:{config:this.config,items:this.items}},(function(t){t&&alert(JSON.stringify(t))}))},download(){confirm("download Y/N?")&&fetch("https://smlog.github.io/data/dict.js").then(t=>t.text()).then(t=>{let e=t.trim().substring(4).replace('");',""),n=JSON.parse(l.a.ungzip(atob(e),{to:"string"})).items;for(let t of n){let e;null==this.enMap[t.en]&&(e={},this.items.push(e),Object.assign(e,t),this.enMap[e.en]=this.items.length-1)}this.save()}).catch(t=>{alert("error:"+t)})},pageList(){let t=this.searchItems().slice().reverse();if(t.length>0){let e=this.page*this.pageSize,n=(1+this.page)*this.pageSize;t=t.slice(e,n)}return t},searchItems(){return this.en?this.items.filter(t=>t.en.indexOf(this.en)>-1):this.items},async addItem(t){let e={en:t,img:""};this.trans(e),this.items.push(e),this.page=0,this.enMap[t.toLowerCase()]=1},selectItem(t){this.curItem=t},search(t){t&&chrome.runtime.sendMessage({_page:"ui",value:t},(function(t){}))},async transAll(){if(this.showwordlist){if(4&this.downTran)return;this.downTran|=4,await this.rawTranList(),this.downTran&=-5}else{if(1&this.downTran)return;this.dongTran|=1;for(let t=0,e=this.pageList();t<e.length;t++)await this.trans(e[t]);this.dongTran&=-2}this.$forceUpdate()},async rawTranList(){let t={tranUrl:"http://localhost:8084/tran"},e=this;for(;this.curIndex<this.candiates.length;this.curIndex++){let n=this.curIndex,a=this.candiates[n],o=await fetch("/tran?q="+encodeURIComponent(a)).then(t=>t.json());if(o.enc)o=JSON.parse(l.a.ungzip(atob(o.enc),{to:"string"}));else if(o.anc)try{o=JSON.parse(m.decompress(u.base64ToBytes(o.anc)))}catch(t){}o&&o.trans_result&&o.trans_result.data[0].dst&&(Object.assign(this.transMap[a.toLowerCase()],{to:o.trans_result.data[0].dst}),o.dict_result&&o.dict_result.simple_means&&o.dict_result.simple_means.symbols&&o.dict_result.simple_means.symbols.length&&Object.assign(this.transMap[a.toLowerCase()],{ph_am:o.dict_result.simple_means.symbols[0].ph_am,ph_en:o.dict_result.simple_means.symbols[0].ph_en})),o.trans_result||(await new Promise(n=>{Object(s.b)(null,{cmd:"translate",config:t,content:{q:a,opts:{to:"zh"}}},(function(t){if(t&&t.filter(t=>"BD"==t.src).length>0){let o=t.filter(t=>"BD"==t.src)[0]._raw;o.trans_result&&Object.assign(e.transMap[a.toLowerCase()],{to:o.trans_result.data[0].dst}),o.dict_result&&o.dict_result.simple_means&&o.dict_result.simple_means.symbols&&o.dict_result.simple_means.symbols.length&&Object.assign(e.transMap[a.toLowerCase()],{ph_am:o.dict_result.simple_means.symbols[0].ph_am,ph_en:o.dict_result.simple_means.symbols[0].ph_en}),(o.trans_result||o.dict_result)&&n(t.filter(t=>"BD"==t.src)[0].to)}})),setTimeout(n,1e4)}),await new Promise(t=>{setTimeout(t,2e3)}))}},async trans(t){let e=this.config.langs;if(t.en)for(var n=0;n<e.length;n++){if(t[e[n]])continue;let a=await new Promise(a=>{Object(s.b)(null,{cmd:"translate",content:{q:t.en,opts:{to:e[n]}}},(function(e){e&&e.filter(t=>"BD"==t.src).length>0&&e.filter(t=>"BD"==t.src)[0].q==t.en&&a(e.filter(t=>"BD"==t.src)[0].to)})),setTimeout(()=>{a("")},6e3)});t[e[n]]=a||t[e[n]]}},save(){r.a.set("dicts",this.items)},del(t){if(t&&confirm("delete?")){for(let e=0,n=this.items.length;e<n;e++)this.items[e].en==t.en&&(this.items.splice(e,1),n--,e--);this.enMap[t.en.toLowerCase()]=0,this.save()}}},components:{}},h=(n("9b03"),n("2877")),g=Object(h.a)(p,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{display:"flex",flex:"1",position:"fixed",background:"white",top:"0",right:"0",left:"0","justify-content":"space-between"}},[e("div",[e("a",{on:{click:function(e){t.showwordlist=!t.showwordlist}}},[t._v("List:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.currentWordType,expression:"currentWordType"}],on:{click:function(e){t.showwordlist=1},change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentWordType=e.target.multiple?n:n[0]}}},t._l(t.wordlistTypes,(function(n){return e("option",{key:n,domProps:{value:n}},[t._v(" "+t._s(n)+"("+t._s(t.wordlist()[n].length)+") ")])})),0)]),e("div",[e("a",{on:{click:function(e){return t.transAll()}}},[t._v("Trans")]),t._v(" ("),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.curIndex,expression:"curIndex",modifiers:{number:!0}}],staticStyle:{width:"40px"},attrs:{min:"0",type:"number",max:t.candiates.length-1},domProps:{value:t.curIndex},on:{click:function(e){return t.scrollTo()},input:function(e){e.target.composing||(t.curIndex=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("/"),e("a",{on:{click:function(e){return t.scrollTo()}}},[t._v(t._s(t.candiates.length))]),t._v(") ")]),e("div",{on:{click:function(e){return t.save()}}},[t._v("Save")]),e("div",{staticStyle:{margin:"5px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.en,expression:"en"}],domProps:{value:t.en},on:{focus:function(e){t.en=""},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(t.en)},input:function(e){e.target.composing||(t.en=e.target.value)}}})])]),e("div",{staticStyle:{position:"fixed",top:"30px",bottom:"30px",overflow:"auto",right:"0",left:"0"}},[e("div",{staticStyle:{position:"absolute",background:"white",inset:"0px",overflow:"auto"},style:{zIndex:t.showwordlist?1:0}},[e("ul",{attrs:{id:"candy"}},t._l(t.candiates,(function(n,a){return e("li",{key:a,style:{color:t.enMap[n.toLowerCase()]?"red":""}},[t.transMap[n.toLowerCase()]?e("div",[e("span",{on:{click:function(e){t.curIndex=a}}},[t._v(" "+t._s(a)+"、")]),e("a",{staticStyle:{cursor:"pointer"},style:{color:t.transMap[n.toLowerCase()].to?"green":""},on:{click:function(e){t.en=n,!t.enMap[n.toLowerCase()]&&t.addItem(n),t.showwordlist=0,t.search(n),t.curItem=t.items.filter(t=>t.en==n)[0]}}},[t._v(t._s(n))]),e("span",[t._v(t._s(t.transMap[n.toLowerCase()].to))]),t.transMap[n.toLowerCase()].ph_am?e("span",[t._v("["+t._s(t.transMap[n.toLowerCase()].ph_am)+"]")]):t._e(),t.transMap[n.toLowerCase()].ph_am!=t.transMap[n.toLowerCase()].ph_en?e("span",[t._v("["+t._s(t.transMap[n.toLowerCase()].ph_en)+"]")]):t._e()]):t._e()])})),0)]),e("div",{staticStyle:{position:"absolute",background:"white",inset:"0px",overflow:"auto"},style:{zIndex:t.showwordlist?0:1}},[e("ul",t._l(t.pageList(),(function(n,a){return e("li",{key:n.en,class:{selected:t.curItem&&n.en==t.curItem.en},staticStyle:{display:"flex","margin-bottom":"10px"}},[e("div",{staticStyle:{display:"flex"}},[e("div",[t._v(t._s(t.items.length-(t.page*t.pageSize+a))+"、")]),e("div",[e("img",{staticStyle:{width:"60px",height:"60px"},style:{border:t.curItem&&n.en==t.curItem.en?"2px solid red":"none"},attrs:{referrerpolicy:"no-referrer",src:n.img},on:{click:function(e){return t.selectItem(n)}}})]),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",{staticStyle:{display:"table"}},[t._l(t.config.langs,(function(a){return e("div",{key:a,staticStyle:{display:"table-row"}},[e("div",{staticStyle:{display:"table-cell"},on:{click:function(e){t.curItem=n,t.search(n[a])}}},[t._v(" "+t._s(a)+": ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:n[a],expression:"item[lan]"}],staticStyle:{display:"table-cell"},domProps:{value:n[a]},on:{input:function(e){e.target.composing||t.$set(n,a,e.target.value)}}})])})),e("div",{staticStyle:{display:"table-row"}},[e("div",{staticStyle:{display:"table-cell"}},[e("a",{on:{click:function(e){return t.googleopen(n)}}},[t._v("IMG:")]),e("a",{on:{click:function(e){return t.closegoogle(n)}}},[t._v("IMG:")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:n.img,expression:"item.img"}],staticStyle:{display:"table-cell"},domProps:{value:n.img},on:{input:function(e){e.target.composing||t.$set(n,"img",e.target.value)}}})])],2)]),e("div",{staticStyle:{"margin-left":"20px",display:"flex","flex-direction":"column"}},[e("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.del(n)}}},[t._v("Delete")]),e("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.trans(n)}}},[t._v("trans")])])])])})),0)])]),e("div",{staticStyle:{position:"fixed",bottom:"0",right:"0","text-align":"right",margin:"5px","user-select":"none"}},[t.page>=1?e("a",{staticClass:"ctrl",staticStyle:{cursor:"pointer",color:"blue","font-weight":"bold",margin:"5px 10px"},on:{click:function(e){t.page=t.page-1}}},[t._v(" Prev ")]):t._e(),t.page<=parseInt((t.items.length+1)/t.pageSize)?e("a",{staticClass:"ctrl",staticStyle:{cursor:"pointer",color:"blue","font-weight":"bold",margin:"5px 10px"},on:{click:function(e){t.page=t.page+1}}},[t._v(" Next("+t._s(t.page)+"/"+t._s(parseInt((t.items.length+1)/t.pageSize))+") ")]):t._e(),t._v(" Total:"+t._s(t.items.length)+" "),e("a",{staticStyle:{margin:"5px 10px"},on:{click:function(e){return t.upload()}}},[t._v("Upload")]),e("a",{staticStyle:{margin:"5px 10px"},on:{click:function(e){return t.download()}}},[t._v("Download")]),e("span",{staticStyle:{margin:"5px 10px"}},[t._v("Page Size:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],staticStyle:{width:"40px",margin:"5px 10px"},attrs:{min:"10",max:"1000",type:"number"},domProps:{value:t.pageSize},on:{input:function(e){e.target.composing||(t.pageSize=e.target.value)}}})])])}),[],!1,null,"0f805ebc",null).exports,f=n("487a"),y=n.n(f),v=n("1157"),w=n.n(v);if(chrome.runtime.sendMessage({_page:"1"},(function(t){})),location.href.indexOf("image.baidu.com")>-1&&w()((function(){w()("body").on("click",".imgitem",(function(){return chrome.runtime.sendMessage({_page:"image",value:w()(this).find("img").eq(0).attr("data-imgurl")},(function(t){})),!1})),chrome.runtime.onMessage.addListener((function(t,e,n){t&&"ui"==t.contents._page&&t.contents.value&&(n(t),w()("#kw").val(t.contents.value),w()("#kw").closest("form").trigger("submit"))})),w()(document).on("scroll",(function(){w()(".newfcImgli").remove(),w()(".imgitem img").each((function(){var t=w()(this).closest(".imgbox");if(t.find(".mark").length>0)return!0;t.prepend('<input class="mark" style="position:absolute;z-index:1000;" type="checkbox"/>')}))}))})),location.href.indexOf("&tbm=isch&")>-1)w()((function(){w()("body").on("click",".imgitem",(function(){return chrome.runtime.sendMessage({_page:"image",value:w()(this).find("img").eq(0).attr("data-imgurl")},(function(t){})),!1})),chrome.runtime.onMessage.addListener((function(t,e,n){t&&"ui"==t.contents._page&&t.contents.value&&(n(t),w()("#kw").val(t.contents.value),w()("#kw").closest("form").trigger("submit"))})),w()(document).on("scroll",(function(){w()(".newfcImgli").remove(),w()(".imgitem img").each((function(){var t=w()(this).closest(".imgbox");if(t.find(".mark").length>0)return!0;t.prepend('<input class="mark" style="position:absolute;z-index:1000;" type="checkbox"/>')}))}))}));else{a.a.prototype.$http=r.a,a.a.prototype.$storejs=r.a,a.a.use(y.a);var b=document.createElement("div"),_="dictword_app";b.setAttribute("id",_),document.body.appendChild(b),new a.a({render:t=>t(g)}).$mount("#"+_)}},"9b03":function(t,e,n){"use strict";n("08d9")},ba5f:function(t,e,n){"use strict";n.d(e,"b",(function(){return R})),n.d(e,"a",(function(){return F})),n("14d9"),n("13d5"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("669d"),n("109c"),n("b2c1"),n("b7ef");var a=n("bc3a"),o=n.n(a),r=n("1157"),i=n.n(r),s=n("da7e"),c=n.n(s);var l=new(n("2b0e").a),u=(n("d9e2"),n("6821")),m=n.n(u);const d=["20221205001484671","20181025000225318"],p=["Ul_aVRQDvqQJOYHRAKDy","s0rbKVj44RcEH9m4yXrf"];let h=c.a.get("token");if(h){let t=h.split("").map(t=>t.charCodeAt(0));d.push("20220901001327423"),p.push([180,186,227,197,130,183,120,166,148,195,177,172,137,181,132,141,155,194,164,150].map((e,n)=>String.fromCharCode(e-t[n])).join(""))}function g(){return chrome&&chrome.runtime&&chrome.runtime.sendMessage}async function f(t,e){let n={};try{if(chrome.tabs)n=await async function(t,e){let n=2;for(;n>0;){n--,v||await o.a.get("https://fanyi.baidu.com/#/en/zh").then(t=>(w=t.data.match(/window.gtk = "(.*?)"/)[1],v=t.data.match(/token: '(.*?)'/)[1],window.gtk=w,[w,v]));var a={from:"en",to:"zh",query:t,transtype:"realtime",simple_means_flag:3,sign:y()(t,w),token:v,domain:"common"};let e=await o()({url:"https://fanyi.baidu.com/v2transapi?from=en&to=zh",method:"post",data:a,transformRequest:[function(t){let e="";for(let n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e.substring(0,e.length-1)}],headers:{"Content-Type":"application/x-www-form-urlencoded",Origin:"https://fanyi.baidu.com",Referer:"https://fanyi.baidu.com/"}}).then(e=>{let n=e.data;var a={};return n.errno&&(v=""),v&&(n.dict_result?(a.to=n.trans_result.data[0].dst,a.am=n.dict_result.simple_means.symbols[0].ph_am,a.en=n.dict_result.simple_means.symbols[0].ph_en,n.dict_result.simple_means.symbols&&(a.parts=n.dict_result.simple_means.symbols[0].parts)):n.trans_result&&(a.to=n.trans_result.data[0].dst),a._raw=n,a.q=t),a});if(v)return e}}(t);else{let e=await async function t(e,n){if(p.length<=n)return;let a=(new Date).getTime(),o=d[n],r=p[n];var s=m()(o+e+a+r);let c=g()?"json":"jsonp";for(var l=0;l<1;l++)try{return await new Promise((r,l)=>{i.a.ajax({url:"https://api.fanyi.baidu.com/api/trans/vip/translate",type:"get",dataType:c,jsonpCallback:"jcb",timeout:5e3,cache:1,data:{q:e,appid:o,salt:a,from:"en",to:"zh",sign:s,tts:0,dict:0},success:function(a){!a.trans_result&&a.error_code?setTimeout(()=>{t(e,++n).then(t=>r(t)).catch(t=>l(t))},300):r({q:a.trans_result[0].src,to:a.trans_result[0].dst})},error:function(t){l(t)}})})}catch(t){throw t}}(t,0);e&&(n=Object.assign(n,e))}}catch(t){n.error=t}return n.src="BD",n}var y=function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function e(t,e){for(var n=0;n<e.length-2;n+=3){var a=e.charAt(n+2);a="a"<=a?a.charCodeAt(0)-87:Number(a),a="+"===e.charAt(n+1)?t>>>a:t<<a,t="+"===e.charAt(n)?t+a&4294967295:t^a}return t}var n=null;return function(a){n=null;var o,r=a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g);if(null===r){var i=a.length;i>30&&(a="".concat(a.substr(0,10)).concat(a.substr(Math.floor(i/2)-5,10)).concat(a.substr(-10,10)))}else{for(var s=a.split(/[\uD800-\uDBFF][\uDC00-\uDFFF]/),c=0,l=s.length,u=[];c<l;c++)""!==s[c]&&u.push.apply(u,function(e){if(Array.isArray(e))return t(e)}(o=s[c].split(""))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c!==l-1&&u.push(r[c]);var m=u.length;m>30&&(a=u.slice(0,10).join("")+u.slice(Math.floor(m/2)-5,Math.floor(m/2)+5).join("")+u.slice(-10).join(""))}for(var d="".concat(String.fromCharCode(103)).concat(String.fromCharCode(116)).concat(String.fromCharCode(107)),p=(null!==n?n:(n=window[d]||"")||"").split("."),h=Number(p[0])||0,g=Number(p[1])||0,f=[],y=0,v=0;v<a.length;v++){var w=a.charCodeAt(v);w<128?f[y++]=w:(w<2048?f[y++]=w>>6|192:(55296==(64512&w)&&v+1<a.length&&56320==(64512&a.charCodeAt(v+1))?(w=65536+((1023&w)<<10)+(1023&a.charCodeAt(++v)),f[y++]=w>>18|240,f[y++]=w>>12&63|128):f[y++]=w>>12|224,f[y++]=w>>6&63|128),f[y++]=63&w|128)}for(var b=h,_="".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(97))+"".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(54)),S="".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(51))+"".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(98))+"".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(102)),C=0;C<f.length;C++)b=e(b+=f[C],_);return b=e(b,S),(b^=g)<0&&(b=2147483648+(2147483647&b)),"".concat((b%=1e6).toString(),".").concat(b^h)}};let v,w;const b=n("d7ac"),_=new(n("98fc"));function S(t){return JSON.parse(b.ungzip(atob(t),{to:"string"}))}const C=function(t){let e=(t.url||t.vid).match(/\d{4}\/\d{2}\/\d{2}/),n=e&&e.length>0&&e[0],a=new Date(n).getTime();return t.d=n,t.dt=a,t.i=0,t},I={crossOrigs:async function(t,e,n){let a=encodeURIComponent;return await fetch(t?"https://api.allorigins.win/raw?url="+a(e):e,{method:"get",headers:{}}).then(t=>"json"==n?t.json():t.text()).then(t=>"xml"==n?_.xml2js(t):t)},mods:{videos:{m:{cnn:{ext:async function(t){if(t.url)return;var e="https://fave.api.cnn.io/v1/video?id="+t.vid+"&customer=cnn&edition=international&env=prod";let n=await fetch(e).then(t=>t.json());var a="https://medium.ngtv.io/media/"+n.mediumId+"?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImNubi1jbm4td2ViLTk1am96MCIsIm5ldHdvcmsiOiJjbm4iLCJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJjbm4iLCJpYXQiOjE1MjQ2ODQwMzB9.Uw8riFJwARLjeE35ffMwSa-37RNxCcQUEp2pqwG9TvM";let o=await fetch(a).then(t=>t.json()),r="",i=navigator.userAgent;r=/ipad|tablet/i.test(i)?"tablet":/mobile/i.test(i)?"phone":"desktop",n.closedCaptions&&n.closedCaptions.types&&(t.cc=n.closedCaptions.types.filter(t=>"webvtt"==t.format&&t.track&&t.track.url)[0].track.url),t.url=o.media[r].unprotected.secureUrl},res:[{type:"xml",urls:S("H4sIAAAAAAAAA6WQsQrDMAxE/yVzsArd8iulg2sJbCpbIZLT5O+ToUvGoOGGg7vHca8hm806ARAWK9JCaqekwlqQBDBahGd4/O2na2mkCgtxNEINW+VhvAfJFNmyCzELn6nk22GUfCt+sjC6CJSkSd1djO57oX+v9fcBtZyYihMCAAA="),conv:async function(t,e){let n=[];for(let a=0;a<t.videos.video.length;a++){let o=t.videos.video[a],r={vid:o.id,title:o.headline,src:e};n.push(C(r))}return n}},{type:"json",urls:S("H4sIAAAAAAAAA4tWyigpKSi20tdPTcksyczP00vOA+L8XP2CnMTKnMziEv2S/ALdvNTyYt2yzJTU/GL9zLyU1Aq9rOL8PKVYAHICSjU/AAAA"),conv:async function(t,e){let n=[];for(let a=0;a<t.length;a++){let o=t[a],r={vid:o.videoId,title:o.title,src:e};n.push(C(r))}return n}}]},cbs:{res:[{type:"json",crossOrig:1,urls:S("H4sIAAAAAAAAA62TwU4EIQyG32XPdvFgjPFVjAcGOgtZhpK2gL69w0STPcvcSEo//v9v+bgE1SLvxvTer26RjF2ujjbTokcyX4GNo5TQaaS8H7dCGbMapQKixBEFVmIgVXN5+i9tvwotpmRvCI08JKsoOqBwdIIn4gn+WlMCLFHI73ptVRrPzAgmpmxb5CqH4KFUXEBfE07mwFiIVU5ItCPeMXsYPZM4CdRBA0ItKa46SXt9hi3mus8YqCFr3PAEuxqiwEacY77BwjZ7nBkxNjxIJ6T36HcKxOhh9wVLqrOJjY0dqYnVyt5+/yU3gXx5g0CVp3et5gc9k7DVOjwWN9tRmaQNkNo7Uv39Ap8/+hmTQkEFAAA="),conv:function(t,e){return t.items.filter(t=>"vod"==t.type&&t.video2).map(t=>C({vid:t.id,url:t.video2,title:t.fulltitle,cc:t.captions,src:e}))}}]}}}}};Object.keys(I.mods.videos.m);const x=n("9d5f"),j=n("0675").LZMA_WORKER,k="SMLOG",A=n("d7ac"),O="words",T="nwords",M=JSON.parse;let z=i()('<iframe id="myaudio" style="display:none;"/>');z.appendTo("body");let L=z[0];window.pako=A,window.storejs=c.a;let q=L.contentDocument||L.contentWindow.document;q.body.innerHTML='<audio id="sound" controls "></audio>\n<audio id="bg" controls   ></audio>';let U=q.querySelector("audio#sound"),P=q.querySelector("audio#bg");o.a.defaults.timeout=5e3;const D=[async t=>await f(t.q,t.opts),async t=>{let e={src:"Dict"};e.q=t.q;{let n=await L.contentWindow.fetch(`https://dict.iciba.com/dictionary/word/suggestion?word=${encodeURIComponent(t.q)}&nums=1&timestamp=0&is_need_mean=1`,{mode:"cors"}).then(t=>t.json());n.message.length>0&&(e.to=n.message[0].paraphrase||n.message[0].means.reduce((t,e)=>t+e.part+" "+e.means.join(","),"")),e._raw=n}return e}];async function N(t){return fetch(t,{responseType:"blob"}).then(t=>t.blob()).then(t=>new Promise(e=>{let n=new FileReader;n.onloadend=function(t){const n=t.target.result;e(n)},n.readAsDataURL(t)}))}const J={};function R(t,e,n){let a=t=>{t&&t.error&&l.$emit("error",t),n(t)};return g()?(J[e.reqId||e.cmd]=a,chrome.runtime.sendMessage(t,e,a)):F(t,e,a)}g()&&(window.onMessageListener=function(t,e,n){if(t&&t.cmd){let e=J[t.reqId||t.cmd];e&&e(t.contents)}n(t.contents)},chrome.runtime.onMessage.addListener(window.onMessageListener));let B={token:(t,e)=>{var n="token "+t.content;fetch("https://api.github.com/user",{method:"get",headers:{accept:"application/vnd.github.v3+json",Authorization:n}}).then(t=>t.json()).then(n=>{n.name&&c.a.set("token",t.content),e(n)})},lists:async(t,e)=>{let n={},a=0;if(await async function(t,e,n){let a=(new Date).getTime();if(!$()["show"+t])return;let o="_"+t,r=c.a.get(o)||0;(e||a-r>18e5)&&(await n(),c.a.set(o,a))}(t.type,t.force,()=>{a++,setTimeout(()=>{(async()=>{await K[t.type](t,e),a--,e({done:!a})})()},1e3)}),t.type==O){let e=et(t.type)||[];for(let t=0,n=e.length;t<n;t++)e[t].i||e[t].n||(e.splice(t,1),n--,t--);tt(t.type,e)}n.contents=et(t.type)||[],n.done=!a,e(n)},newWord:async(t,e)=>{let n={};if(t.content.q=t.content.q.trim(),!t.content.q)return n.error="empty word",void e(n);let a=et(O)||[],o=et(T)||[],r=t.content.q.toLocaleLowerCase(),i=[o,a];for(let t=0;t<i.length;t++){let e=i[t];for(var s=0,c=e.length;s<c;s++)if(e[s].q==r){e.splice(s,1),s--,c--,1==t&&tt(O,a),t=i.length;break}}o.unshift(Object.assign({},t.content,{q:r}));try{tt(T,o,1)}catch(t){alert(t)}n.contents=t.content,e(n)},translate:(t,e)=>{let n=[];D.map(a=>a(t.content).then(a=>{n.push(a),a&&a._raw&&t.config&&t.config.tranUrl&&(async()=>{delete a._raw.logid;let e=j.compress(JSON.stringify(a._raw),9);e=x.bytesToBase64(new Uint8Array(e)),await fetch(t.config.tranUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({item:t.content,resp:a,enc:JSON.stringify({anc:e})})})})(),e(n)}))},bg:t=>{t.pause||(P.currentTime=0)},audio:(t,e)=>{if(t.pause)return U.pause(),e({}),!1;U.title=t.content.trim(),q.title=U.title;let n=`https://fanyi.baidu.com/gettts?lan=${t.lang||"en"}&text=${encodeURIComponent(t.content)}&spd=5&source=web&cache=0`;return U.src=n,U.load(),P.pause(),U.play(),t.wait?(U.onerror=U.onended=function(){P.play(),e({})},!0):(e({}),!1)},setConfig:(t,e)=>{c.a.set("config",t.content),e($())},getConfig:(t,e)=>{e($())},content:(t,e)=>{!async function(t,e){await E(k,"data",t.content.p).then(t=>{let n=H(t);n=Y(t),e({content:n})})}(t,e)},urls:(t,e)=>{!async function(t,e){await E(k,"data",t.content.p,0,t.content.cache).then(t=>{let n=A.ungzip(window.atob(t),{to:"string"});e({content:M(n)})})}(t,e)},upload:(t,e)=>{(async()=>{try{let n=k,a="data",o="dict.js";for(let e=0;e<t.content.length;e++){let o=t.content[e];if("http"==o.img.substring(0,4)){let t=await N(o.img);o.img="img/"+btoa(o.img)+"."+t[0],await V(n,a,o.img,t[1],0)}}let r=`\n          cb("${btoa(A.gzip(JSON.stringify(t.content),{to:"string",level:9}))}");\n          `;await V(n,a,o,r,0),e(t.content)}catch(t){return e("error")}})()}};function $(){return c.a.get("config")||{}}function F(t,e,n){let a=a=>{g()?chrome.tabs.sendMessage(t.tab.id,{cmd:e.cmd,reqId:e.reqId,contents:a},(function(t){})):n(a)};return B[e.cmd]&&(async()=>{await B[e.cmd](e,a)})(),!0}async function E(t,e,n,a,o){let r=c.a.get("token");var i="token "+r;let s={accept:"application/vnd.github.v3+json"};r&&(s.Authorization=i);let l=`https://api.github.com/repos/${t}/${e}/contents/${n}`+(a?"?ref="+a:"");return l+=o?(l.indexOf("?")>-1?"&":"?")+"cache="+o:"",(await fetch(l,{method:"get",headers:s}).then(t=>t.json())).content}async function G({name:t,rep:e,path:n,since:a},o,r=!0){var i=`https://api.github.com/repos/${t}/${e}/commits?path=${encodeURIComponent(n)}&per_page=100`;a&&(i+="&since="+encodeURIComponent(a));let s=c.a.get("token");var l="token "+s;let u={accept:"application/vnd.github.v3+json"};s&&(u.Authorization=l);let m=1,d=[];for(;;){let t=await fetch(i+"&page="+m,{method:"get",headers:u}).then(t=>t.json());if(d.push(...t),t.length<100)break;m++}for(let a=0;a<d.length;a++){let i=d[a],s=await E(t,e,n,i.sha);if(await o(i,r?H(s):s,a))return}return d}async function V(t,e,n,a,o){let r=c.a.get("token");var i="token "+r,s=`https://api.github.com/repos/${t}/${e}/contents/${n}`;if(!r)return{error:"token?"};let l=await fetch(s,{method:"get",headers:{accept:"application/vnd.github.v3+json"}}).then(t=>t.json()),u=l.sha;return l=await fetch(s,{method:"put",body:JSON.stringify({message:"update"+new Date,branch:"main",content:Q(o?X(a):a),sha:u}),headers:{accept:"application/vnd.github.v3+json",Authorization:i}}).then(t=>t.json()),l}async function W(){let t=et("videos")||[];if(!c.a.get("token"))return t;let e=t.reduce((t,e)=>(t[e.vid]=1,t),{}),n=await async function(){let t=(new Date).getTime(),e=Object.keys(I.mods.videos.m),n=[];for(let a=0;a<e.length;a++){let o=e[a],r=I.mods.videos.m[o].res;for(let e=0;e<r.length;e++){let a=r[e];for(let e=0;e<a.urls.length;e++)try{let r=a.urls[e],i=await I.crossOrigs(a.crossOrig,r+"?t="+t,a.type);n.push(...await a.conv(i,o))}catch(t){}}}let a=[];return n.reduce((t,e)=>(t[e.vid]||(t[e.vid]=1,a.push(e)),t),{}),a}();for(let a=0;a<n.length;a++){let o=n[a];e[o.vid]||t.unshift(o)}return t.sort((t,e)=>e.dt-t.dt),t.length=Math.min(500,t.length),tt("videos",t),t}function Q(t){return btoa(unescape(encodeURIComponent(t)))}function H(t){return decodeURIComponent(escape(atob(t)))}const K={words:async(t,e)=>{let n=$(),a=k,o="data",r="update.json",i=t.type+"Since",s=et(O)||[],l=et(T)||[],u=c.a.get(i),m=u,d=l.filter(t=>!t.i&&t.n||t.i&&!t.n).map(t=>{for(let e in t)"_"==e[0]&&delete t[e];return t}),p=[],h={};for(var g=0;g<10;g++){let t=m;try{await G({name:a,rep:o,path:r,since:t},(e,n,a)=>{0==a&&(u=e.commit.committer.date);let o=M(n);t=e.commit.committer.date,p.push(...o)});break}catch(t){h.error=t,await new Promise(t=>setTimeout(t,3e3))}}s.unshift(...p);let f={},y=[l,s];for(let t=0;t<y.length;t++){let e=y[t];for(let t=0,n=e.length;t<n;t++){let a=e[t];a.q&&!f[a.q]&&a.n||(e.splice(t,1),n--,t--),f[a.q]=(f[a.q]||0)+1}}tt(O,s),tt(T,l,1);let v=l.concat(s);if(u&&c.a.set(i,new Date(new Date(u).getTime()+1e3).toISOString()),n.fzWords>0&&d.length>n.fzWords){let t=d.map(t=>Object.assign({},t,{i:1})),e=JSON.stringify(t);if(t.length>0){let n=await V(a,o,r,e);h.error=n.error,n.commit&&(c.a.set(i,new Date(new Date(n.commit.committer.date).getTime()+1e3).toISOString()),s.unshift(...t),tt(O,s),l.length=0,tt(T,l,1),v=s)}}h.contents=v,e(h)},news:async(t,e)=>{let n=t.type+"Since",a=c.a.get(n),o=et(t.type)||[],r=[],i=await G({name:"SMLOG",rep:"data",path:"l.json",since:a},(t,e,n)=>{if(0==n&&(a=t.commit.committer.date),!e)return;let o=Z(e),i=M(o);return r.push(...i),r.length>500||void 0},!1),s=o.reduce((t,e)=>(t[e.p]=1,t),{});o.unshift(...r.filter(t=>!s[t.p])),o.sort((t,e)=>parseInt(e.date)-parseInt(t.date)),c.a.set(n,a);let l={};l.error=i.message,l.contents=o,o.length=Math.min(500,o.length),tt(t.type,o),e(l)},videos:async(t,e)=>{let n,a=k,o="data",r="v1.json",i=await W(),s=t.type+"Since",l=c.a.get(s),u=[],m=$();0==i.length&&(l=0),e({contents:i});try{await G({name:a,rep:o,path:r,since:l},(t,e,n)=>{0==n&&(l=t.commit.committer.date);let a=e;if(!a)return;a=Z(e);let o=M(a);u.push(...o)},0),i.unshift(...u);let e={};for(let t=0,n=i.length;t<n;t++)e[i[t].vid]?(i.splice(t,1),t--,n--):e[i[t].vid]=1;i.sort((t,e)=>e.dt-t.dt),tt(t.type,i),l&&c.a.set(s,new Date(new Date(l).getTime()+1e3).toISOString());let d=(new Date).getTime()-432e6,p=i.filter(t=>!t.i&&t.dt>d);if(m.fzVideos>0&&p.length>=m.fzVideos){let e=await V(a,o,r,JSON.stringify(p.map(t=>{for(let e in t)"_"==e[0]&&delete t[e];return Object.assign({i:1},t)})),1);e.commit&&(p.map(t=>t.i=1),tt(t.type,i),c.a.set(s,new Date(new Date(e.commit.committer.date).getTime()+1e3).toISOString())),n=e.error}}catch(t){n=t}e({error:n,contents:i})}};function Y(t){return A.ungzip(t,{to:"string"})}function X(t){return A.gzip(t,{to:"string"})}function Z(t){let e;try{e=H(t)}catch(n){e=atob(t)}try{e=Y(e)}catch(t){}return e}function tt(t,e,n){localStorage.setItem(t,n?JSON.stringify(e):A.gzip(JSON.stringify(e),{to:"string",level:9}))}function et(t){let e=localStorage.getItem(t);return e&&M("["==e[0]?e:A.ungzip(localStorage.getItem(t),{to:"string"}))}}});