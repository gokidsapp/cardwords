!function(t){function e(e){for(var o,a,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(u&&u(e);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={popup_main:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()}({0:function(t,e,n){t.exports=n("0a3d")},"08d9":function(t,e,n){},"0a3d":function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),r=(n("14d9"),n("13d5"),n("b7ef"),n("da7e")),i=n.n(r);var a={imgBase:"",ttsBase:"audio/",passNum:40,gameTime1:3,gameTime2:6,_estUrl:"",langs:["en","zh","yue"],tips:{en:["no no no","oh sorry.","incorrect","come on."],zh:["继续努力","加油！"],yue:["继续努力","加油！"]},ttslan:{en:"en",zh:"zh",yue:"cte"},url:"https://smlog.github.io/data/dict.js"},s=n("ba5f"),c=n("d7ac"),l=n.n(c);const u=n("9d5f"),d=n("0675").LZMA_WORKER;let p={};p.custom="".split(/\n+/).filter(t=>t.trim()).map(t=>t.trim());var m={data:()=>({curIndex:0,enMap:{},transMap:{},showwordlist:0,curItem:null,wordlistTypes:Object.keys(p).sort(),currentWordType:"custom",items:i.a.get("dicts")||[],config:a,page:0,pages:1,pageSize:10,en:"",downTran:0}),mounted(){Object.assign(this.enMap,this.items.reduce((t,e)=>(t[e.en.toLowerCase()]=1,t),{}));let t=this;chrome.runtime.onMessage.addListener((function(e,n,o){e&&"image"==e.contents._page&&e.contents.value&&(o(e),t.curItem.en&&e.contents.value&&(t.curItem.img=e.contents.value,t.save()))})),this.transMap={};for(let t of this.candiates)this.transMap[t.toLowerCase()]={to:"",ph_am:"",ph_en:""}},computed:{candiates(){return p[this.currentWordType]||[]}},watch:{currentWordType(){this.transMap={};for(let t of this.candiates)this.transMap[t.toLowerCase()]={to:"",ph_am:"",ph_en:""}}},methods:{scrollTo(){document.querySelectorAll("#candy li")[this.curIndex].scrollIntoView()},wordlist:()=>p,googleopen(t){window.open(`https://www.google.com/search?q=${encodeURIComponent(t.en)}&tbm=isch`,"googleimage")},printLog(){let t=[];for(let e of this.items)for(let n of this.config.langs){let o=this.config.ttslan[n],r=e[n];t.push(`"${n}/${r.trim()}.mp3" https://fanyi.baidu.com/gettts?lan=${encodeURIComponent(o)}&text=${encodeURIComponent(r.trim())}&spd=3&source=web`)}},upload(){confirm("upload Y?")&&Object(s.b)(null,{cmd:"upload",content:{config:this.config,items:this.items}},(function(t){t&&alert(JSON.stringify(t))}))},download(){confirm("download Y/N?")&&fetch("https://smlog.github.io/data/dict.js").then(t=>t.text()).then(t=>{let e=t.trim().substring(4).replace('");',""),n=JSON.parse(l.a.ungzip(atob(e),{to:"string"})).items;for(let t of n){let e;null==this.enMap[t.en]&&(e={},this.items.push(e),Object.assign(e,t),this.enMap[e.en]=this.items.length-1)}this.save()}).catch(t=>{alert("error:"+t)})},pageList(){let t=this.searchItems().slice().reverse();if(t.length>0){let e=this.page*this.pageSize,n=(1+this.page)*this.pageSize;t=t.slice(e,n)}return t},searchItems(){return this.en?this.items.filter(t=>t.en.indexOf(this.en)>-1):this.items},async addItem(t){let e={en:t,img:""};this.trans(e),this.items.push(e),this.page=0,this.enMap[t.toLowerCase()]=1},selectItem(t){this.curItem=t},search(t){t&&chrome.runtime.sendMessage({_page:"ui",value:t},(function(t){}))},async transAll(){if(this.showwordlist){if(4&this.downTran)return;this.downTran|=4,await this.rawTranList(),this.downTran&=-5}else{if(1&this.downTran)return;this.dongTran|=1;for(let t=0,e=this.pageList();t<e.length;t++)await this.trans(e[t]);this.dongTran&=-2}this.$forceUpdate()},async rawTranList(){let t={tranUrl:"http://localhost:8084/tran"},e=this;for(;this.curIndex<this.candiates.length;this.curIndex++){let n=this.curIndex,o=this.candiates[n],r=await fetch("/tran?q="+encodeURIComponent(o)).then(t=>t.json());if(r.enc)r=JSON.parse(l.a.ungzip(atob(r.enc),{to:"string"}));else if(r.anc)try{r=JSON.parse(d.decompress(u.base64ToBytes(r.anc)))}catch(t){}r&&r.trans_result&&r.trans_result.data[0].dst&&(Object.assign(this.transMap[o.toLowerCase()],{to:r.trans_result.data[0].dst}),r.dict_result&&r.dict_result.simple_means&&r.dict_result.simple_means.symbols&&r.dict_result.simple_means.symbols.length&&Object.assign(this.transMap[o.toLowerCase()],{ph_am:r.dict_result.simple_means.symbols[0].ph_am,ph_en:r.dict_result.simple_means.symbols[0].ph_en})),r.trans_result||(await new Promise(n=>{Object(s.b)(null,{cmd:"translate",config:t,content:{q:o,opts:{to:"zh"}}},(function(t){if(t&&t.filter(t=>"BD"==t.src).length>0){let r=t.filter(t=>"BD"==t.src)[0]._raw;r.trans_result&&Object.assign(e.transMap[o.toLowerCase()],{to:r.trans_result.data[0].dst}),r.dict_result&&r.dict_result.simple_means&&r.dict_result.simple_means.symbols&&r.dict_result.simple_means.symbols.length&&Object.assign(e.transMap[o.toLowerCase()],{ph_am:r.dict_result.simple_means.symbols[0].ph_am,ph_en:r.dict_result.simple_means.symbols[0].ph_en}),(r.trans_result||r.dict_result)&&n(t.filter(t=>"BD"==t.src)[0].to)}})),setTimeout(n,1e4)}),await new Promise(t=>{setTimeout(t,2e3)}))}},async trans(t){let e=this.config.langs;if(t.en)for(var n=0;n<e.length;n++){if(t[e[n]])continue;let o=await new Promise(o=>{Object(s.b)(null,{cmd:"translate",content:{q:t.en,opts:{to:e[n]}}},(function(e){e&&e.filter(t=>"BD"==t.src).length>0&&e.filter(t=>"BD"==t.src)[0].q==t.en&&o(e.filter(t=>"BD"==t.src)[0].to)})),setTimeout(()=>{o("")},6e3)});t[e[n]]=o||t[e[n]]}},save(){i.a.set("dicts",this.items)},del(t){if(t&&confirm("delete?")){for(let e=0,n=this.items.length;e<n;e++)this.items[e].en==t.en&&(this.items.splice(e,1),n--,e--);this.enMap[t.en.toLowerCase()]=0,this.save()}}},components:{}},h=(n("9b03"),n("2877")),g=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{display:"flex",flex:"1",position:"fixed",background:"white",top:"0",right:"0",left:"0","justify-content":"space-between"}},[e("div",[e("a",{on:{click:function(e){t.showwordlist=!t.showwordlist}}},[t._v("List:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.currentWordType,expression:"currentWordType"}],on:{click:function(e){t.showwordlist=1},change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.currentWordType=e.target.multiple?n:n[0]}}},t._l(t.wordlistTypes,(function(n){return e("option",{key:n,domProps:{value:n}},[t._v(" "+t._s(n)+"("+t._s(t.wordlist()[n].length)+") ")])})),0)]),e("div",[e("a",{on:{click:function(e){return t.transAll()}}},[t._v("Trans")]),t._v(" ("),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.curIndex,expression:"curIndex",modifiers:{number:!0}}],staticStyle:{width:"40px"},attrs:{min:"0",type:"number",max:t.candiates.length-1},domProps:{value:t.curIndex},on:{click:function(e){return t.scrollTo()},input:function(e){e.target.composing||(t.curIndex=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v("/"),e("a",{on:{click:function(e){return t.scrollTo()}}},[t._v(t._s(t.candiates.length))]),t._v(") ")]),e("div",{on:{click:function(e){return t.save()}}},[t._v("Save")]),e("div",{staticStyle:{margin:"5px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.en,expression:"en"}],domProps:{value:t.en},on:{focus:function(e){t.en=""},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(t.en)},input:function(e){e.target.composing||(t.en=e.target.value)}}})])]),e("div",{staticStyle:{position:"fixed",top:"30px",bottom:"30px",overflow:"auto",right:"0",left:"0"}},[e("div",{staticStyle:{position:"absolute",background:"white",inset:"0px",overflow:"auto"},style:{zIndex:t.showwordlist?1:0}},[e("ul",{attrs:{id:"candy"}},t._l(t.candiates,(function(n,o){return e("li",{key:o,style:{color:t.enMap[n.toLowerCase()]?"red":""}},[t.transMap[n.toLowerCase()]?e("div",[e("span",{on:{click:function(e){t.curIndex=o}}},[t._v(" "+t._s(o)+"、")]),e("a",{staticStyle:{cursor:"pointer"},style:{color:t.transMap[n.toLowerCase()].to?"green":""},on:{click:function(e){t.en=n,!t.enMap[n.toLowerCase()]&&t.addItem(n),t.showwordlist=0,t.search(n),t.curItem=t.items.filter(t=>t.en==n)[0]}}},[t._v(t._s(n))]),e("span",[t._v(t._s(t.transMap[n.toLowerCase()].to))]),t.transMap[n.toLowerCase()].ph_am?e("span",[t._v("["+t._s(t.transMap[n.toLowerCase()].ph_am)+"]")]):t._e(),t.transMap[n.toLowerCase()].ph_am!=t.transMap[n.toLowerCase()].ph_en?e("span",[t._v("["+t._s(t.transMap[n.toLowerCase()].ph_en)+"]")]):t._e()]):t._e()])})),0)]),e("div",{staticStyle:{position:"absolute",background:"white",inset:"0px",overflow:"auto"},style:{zIndex:t.showwordlist?0:1}},[e("ul",t._l(t.pageList(),(function(n,o){return e("li",{key:n.en,class:{selected:t.curItem&&n.en==t.curItem.en},staticStyle:{display:"flex","margin-bottom":"10px"}},[e("div",{staticStyle:{display:"flex"}},[e("div",[t._v(t._s(t.items.length-(t.page*t.pageSize+o))+"、")]),e("div",[e("img",{staticStyle:{width:"60px",height:"60px"},style:{border:t.curItem&&n.en==t.curItem.en?"2px solid red":"none"},attrs:{referrerpolicy:"no-referrer",src:n.img},on:{click:function(e){return t.selectItem(n)}}})]),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",{staticStyle:{display:"table"}},[t._l(t.config.langs,(function(o){return e("div",{key:o,staticStyle:{display:"table-row"}},[e("div",{staticStyle:{display:"table-cell"},on:{click:function(e){t.curItem=n,t.search(n[o])}}},[t._v(" "+t._s(o)+": ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:n[o],expression:"item[lan]"}],staticStyle:{display:"table-cell"},domProps:{value:n[o]},on:{input:function(e){e.target.composing||t.$set(n,o,e.target.value)}}})])})),e("div",{staticStyle:{display:"table-row"}},[e("div",{staticStyle:{display:"table-cell"}},[e("a",{on:{click:function(e){return t.googleopen(n)}}},[t._v("IMG:")]),e("a",{on:{click:function(e){return t.closegoogle(n)}}},[t._v("IMG:")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:n.img,expression:"item.img"}],staticStyle:{display:"table-cell"},domProps:{value:n.img},on:{input:function(e){e.target.composing||t.$set(n,"img",e.target.value)}}})])],2)]),e("div",{staticStyle:{"margin-left":"20px",display:"flex","flex-direction":"column"}},[e("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.del(n)}}},[t._v("Delete")]),e("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.trans(n)}}},[t._v("trans")])])])])})),0)])]),e("div",{staticStyle:{position:"fixed",bottom:"0",right:"0","text-align":"right",margin:"5px","user-select":"none"}},[t.page>=1?e("a",{staticClass:"ctrl",staticStyle:{cursor:"pointer",color:"blue","font-weight":"bold",margin:"5px 10px"},on:{click:function(e){t.page=t.page-1}}},[t._v(" Prev ")]):t._e(),t.page<=parseInt((t.items.length+1)/t.pageSize)?e("a",{staticClass:"ctrl",staticStyle:{cursor:"pointer",color:"blue","font-weight":"bold",margin:"5px 10px"},on:{click:function(e){t.page=t.page+1}}},[t._v(" Next("+t._s(t.page)+"/"+t._s(parseInt((t.items.length+1)/t.pageSize))+") ")]):t._e(),t._v(" Total:"+t._s(t.items.length)+" "),e("a",{staticStyle:{margin:"5px 10px"},on:{click:function(e){return t.upload()}}},[t._v("Upload")]),e("a",{staticStyle:{margin:"5px 10px"},on:{click:function(e){return t.download()}}},[t._v("Download")]),e("span",{staticStyle:{margin:"5px 10px"}},[t._v("Page Size:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],staticStyle:{width:"40px",margin:"5px 10px"},attrs:{min:"10",max:"1000",type:"number"},domProps:{value:t.pageSize},on:{input:function(e){e.target.composing||(t.pageSize=e.target.value)}}})])])}),[],!1,null,"0f805ebc",null).exports,f=n("487a"),y=n.n(f),v=n("1157"),w=n.n(v);if(chrome.runtime.sendMessage({_page:"1"},(function(t){})),location.href.indexOf("image.baidu.com")>-1&&w()((function(){w()("body").on("click",".imgitem",(function(){return chrome.runtime.sendMessage({_page:"image",value:w()(this).find("img").eq(0).attr("data-imgurl")},(function(t){})),!1})),chrome.runtime.onMessage.addListener((function(t,e,n){t&&"ui"==t.contents._page&&t.contents.value&&(n(t),w()("#kw").val(t.contents.value),w()("#kw").closest("form").trigger("submit"))})),w()(document).on("scroll",(function(){w()(".newfcImgli").remove(),w()(".imgitem img").each((function(){var t=w()(this).closest(".imgbox");if(t.find(".mark").length>0)return!0;t.prepend('<input class="mark" style="position:absolute;z-index:1000;" type="checkbox"/>')}))}))})),location.href.indexOf("&tbm=isch&")>-1)w()((function(){w()("body").on("click",".imgitem",(function(){return chrome.runtime.sendMessage({_page:"image",value:w()(this).find("img").eq(0).attr("data-imgurl")},(function(t){})),!1})),chrome.runtime.onMessage.addListener((function(t,e,n){t&&"ui"==t.contents._page&&t.contents.value&&(n(t),w()("#kw").val(t.contents.value),w()("#kw").closest("form").trigger("submit"))})),w()(document).on("scroll",(function(){w()(".newfcImgli").remove(),w()(".imgitem img").each((function(){var t=w()(this).closest(".imgbox");if(t.find(".mark").length>0)return!0;t.prepend('<input class="mark" style="position:absolute;z-index:1000;" type="checkbox"/>')}))}))}));else{o.a.prototype.$http=i.a,o.a.prototype.$storejs=i.a,o.a.use(y.a);var b=document.createElement("div"),_="dictword_app";b.setAttribute("id",_),document.body.appendChild(b),new o.a({render:t=>t(g)}).$mount("#"+_)}},"9b03":function(t,e,n){"use strict";n("08d9")},ba5f:function(t,e,n){"use strict";n.d(e,"b",(function(){return R})),n.d(e,"a",(function(){return F})),n("14d9"),n("13d5"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("669d"),n("109c"),n("b2c1"),n("b7ef");var o=n("bc3a"),r=n.n(o),i=n("1157"),a=n.n(i),s=n("da7e"),c=n.n(s);var l=new(n("2b0e").a),u=(n("d9e2"),n("6821")),d=n.n(u);const p=["20221205001484671","20181025000225318"],m=["Ul_aVRQDvqQJOYHRAKDy","s0rbKVj44RcEH9m4yXrf"];let h=c.a.get("token");if(h){let t=h.split("").map(t=>t.charCodeAt(0));p.push("20220901001327423"),m.push([180,186,227,197,130,183,120,166,148,195,177,172,137,181,132,141,155,194,164,150].map((e,n)=>String.fromCharCode(e-t[n])).join(""))}function g(){return chrome&&chrome.runtime&&chrome.runtime.sendMessage}async function f(t,e){let n={};try{if(chrome.tabs)n=await async function(t,e){let n=2;for(;n>0;){n--,v||await r.a.get("https://fanyi.baidu.com/#/en/zh").then(t=>(w=t.data.match(/window.gtk = "(.*?)"/)[1],v=t.data.match(/token: '(.*?)'/)[1],window.gtk=w,[w,v]));var o={from:"en",to:"zh",query:t,transtype:"realtime",simple_means_flag:3,sign:y()(t,w),token:v,domain:"common"};let e=await r()({url:"https://fanyi.baidu.com/v2transapi?from=en&to=zh",method:"post",data:o,transformRequest:[function(t){let e="";for(let n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e.substring(0,e.length-1)}],headers:{"Content-Type":"application/x-www-form-urlencoded",Origin:"https://fanyi.baidu.com",Referer:"https://fanyi.baidu.com/"}}).then(e=>{let n=e.data;var o={};return n.errno&&(v=""),v&&(n.dict_result?(o.to=n.trans_result.data[0].dst,o.am=n.dict_result.simple_means.symbols[0].ph_am,o.en=n.dict_result.simple_means.symbols[0].ph_en,n.dict_result.simple_means.symbols&&(o.parts=n.dict_result.simple_means.symbols[0].parts)):n.trans_result&&(o.to=n.trans_result.data[0].dst),o._raw=n,o.q=t),o});if(v)return e}}(t);else{let e=await async function t(e,n){if(m.length<=n)return;let o=(new Date).getTime(),r=p[n],i=m[n];var s=d()(r+e+o+i);let c=g()?"json":"jsonp";for(var l=0;l<1;l++)try{return await new Promise((i,l)=>{a.a.ajax({url:"https://api.fanyi.baidu.com/api/trans/vip/translate",type:"get",dataType:c,jsonpCallback:"jcb",timeout:5e3,cache:1,data:{q:e,appid:r,salt:o,from:"en",to:"zh",sign:s,tts:0,dict:0},success:function(o){!o.trans_result&&o.error_code?setTimeout(()=>{t(e,++n).then(t=>i(t)).catch(t=>l(t))},300):i({q:o.trans_result[0].src,to:o.trans_result[0].dst})},error:function(t){l(t)}})})}catch(t){throw t}}(t,0);e&&(n=Object.assign(n,e))}}catch(t){n.error=t}return n.src="BD",n}var y=function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function e(t,e){for(var n=0;n<e.length-2;n+=3){var o=e.charAt(n+2);o="a"<=o?o.charCodeAt(0)-87:Number(o),o="+"===e.charAt(n+1)?t>>>o:t<<o,t="+"===e.charAt(n)?t+o&4294967295:t^o}return t}var n=null;return function(o){n=null;var r,i=o.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g);if(null===i){var a=o.length;a>30&&(o="".concat(o.substr(0,10)).concat(o.substr(Math.floor(a/2)-5,10)).concat(o.substr(-10,10)))}else{for(var s=o.split(/[\uD800-\uDBFF][\uDC00-\uDFFF]/),c=0,l=s.length,u=[];c<l;c++)""!==s[c]&&u.push.apply(u,function(e){if(Array.isArray(e))return t(e)}(r=s[c].split(""))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c!==l-1&&u.push(i[c]);var d=u.length;d>30&&(o=u.slice(0,10).join("")+u.slice(Math.floor(d/2)-5,Math.floor(d/2)+5).join("")+u.slice(-10).join(""))}for(var p="".concat(String.fromCharCode(103)).concat(String.fromCharCode(116)).concat(String.fromCharCode(107)),m=(null!==n?n:(n=window[p]||"")||"").split("."),h=Number(m[0])||0,g=Number(m[1])||0,f=[],y=0,v=0;v<o.length;v++){var w=o.charCodeAt(v);w<128?f[y++]=w:(w<2048?f[y++]=w>>6|192:(55296==(64512&w)&&v+1<o.length&&56320==(64512&o.charCodeAt(v+1))?(w=65536+((1023&w)<<10)+(1023&o.charCodeAt(++v)),f[y++]=w>>18|240,f[y++]=w>>12&63|128):f[y++]=w>>12|224,f[y++]=w>>6&63|128),f[y++]=63&w|128)}for(var b=h,_="".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(97))+"".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(54)),S="".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(51))+"".concat(String.fromCharCode(94)).concat(String.fromCharCode(43)).concat(String.fromCharCode(98))+"".concat(String.fromCharCode(43)).concat(String.fromCharCode(45)).concat(String.fromCharCode(102)),C=0;C<f.length;C++)b=e(b+=f[C],_);return b=e(b,S),(b^=g)<0&&(b=2147483648+(2147483647&b)),"".concat((b%=1e6).toString(),".").concat(b^h)}};let v,w;const b=n("d7ac"),_=new(n("98fc"));function S(t){return JSON.parse(b.ungzip(atob(t),{to:"string"}))}const C=function(t){let e=(t.url||t.vid).match(/\d{4}\/\d{2}\/\d{2}/),n=e&&e.length>0&&e[0],o=new Date(n).getTime();return t.d=n,t.dt=o,t.i=0,t},I={crossOrigs:async function(t,e,n){let o=encodeURIComponent;return await fetch(t?"https://api.allorigins.win/raw?url="+o(e):e,{method:"get",headers:{}}).then(t=>"json"==n?t.json():t.text()).then(t=>"xml"==n?_.xml2js(t):t)},mods:{videos:{m:{cnn:{ext:async function(t){if(t.url)return;var e="https://fave.api.cnn.io/v1/video?id="+t.vid+"&customer=cnn&edition=international&env=prod";let n=await fetch(e).then(t=>t.json());var o="https://medium.ngtv.io/media/"+n.mediumId+"?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImNubi1jbm4td2ViLTk1am96MCIsIm5ldHdvcmsiOiJjbm4iLCJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJjbm4iLCJpYXQiOjE1MjQ2ODQwMzB9.Uw8riFJwARLjeE35ffMwSa-37RNxCcQUEp2pqwG9TvM";let r=await fetch(o).then(t=>t.json()),i="",a=navigator.userAgent;i=/ipad|tablet/i.test(a)?"tablet":/mobile/i.test(a)?"phone":"desktop",n.closedCaptions&&n.closedCaptions.types&&(t.cc=n.closedCaptions.types.filter(t=>"webvtt"==t.format&&t.track&&t.track.url)[0].track.url),t.url=r.media[i].unprotected.secureUrl},res:[{type:"xml",urls:S("H4sIAAAAAAAAA6WQsQrDMAxE/yVzsArd8iulg2sJbCpbIZLT5O+ToUvGoOGGg7vHca8hm806ARAWK9JCaqekwlqQBDBahGd4/O2na2mkCgtxNEINW+VhvAfJFNmyCzELn6nk22GUfCt+sjC6CJSkSd1djO57oX+v9fcBtZyYihMCAAA="),conv:async function(t,e){let n=[];for(let o=0;o<t.videos.video.length;o++){let r=t.videos.video[o],i={vid:r.id,title:r.headline,src:e};n.push(C(i))}return n}},{type:"json",urls:S("H4sIAAAAAAAAA4tWyigpKSi20tdPTcksyczP00vOA+L8XP2CnMTKnMziEv2S/ALdvNTyYt2yzJTU/GL9zLyU1Aq9rOL8PKVYAHICSjU/AAAA"),conv:async function(t,e){let n=[];for(let o=0;o<t.length;o++){let r=t[o],i={vid:r.videoId,title:r.title,src:e};n.push(C(i))}return n}}]},cbs:{res:[{type:"json",crossOrig:1,urls:S("H4sIAAAAAAAAA62TwU4EIQyG32XPdvFgjPFVjAcGOgtZhpK2gL69w0STPcvcSEo//v9v+bgE1SLvxvTer26RjF2ujjbTokcyX4GNo5TQaaS8H7dCGbMapQKixBEFVmIgVXN5+i9tvwotpmRvCI08JKsoOqBwdIIn4gn+WlMCLFHI73ptVRrPzAgmpmxb5CqH4KFUXEBfE07mwFiIVU5ItCPeMXsYPZM4CdRBA0ItKa46SXt9hi3mus8YqCFr3PAEuxqiwEacY77BwjZ7nBkxNjxIJ6T36HcKxOhh9wVLqrOJjY0dqYnVyt5+/yU3gXx5g0CVp3et5gc9k7DVOjwWN9tRmaQNkNo7Uv39Ap8/+hmTQkEFAAA="),conv:function(t,e){return t.items.filter(t=>"vod"==t.type&&t.video2).map(t=>C({vid:t.id,url:t.video2,title:t.fulltitle,cc:t.captions,src:e}))}}]}}}}};Object.keys(I.mods.videos.m);const x=n("9d5f"),j=n("0675").LZMA_WORKER,k="SMLOG",A=n("d7ac"),O="words",M="nwords",T=JSON.parse;let L=a()('<iframe id="myaudio" style="display:none;"/>');L.appendTo("body");let z=L[0];window.pako=A,window.storejs=c.a;let q=z.contentDocument||z.contentWindow.document;q.body.innerHTML='<audio id="sound" controls "></audio>\n<audio id="bg" controls   ></audio>';let D=q.querySelector("audio#sound"),N=q.querySelector("audio#bg");r.a.defaults.timeout=5e3;const U=[async t=>await f(t.q,t.opts),async t=>{let e={src:"Dict"};e.q=t.q;{let n=await z.contentWindow.fetch(`https://dict.iciba.com/dictionary/word/suggestion?word=${encodeURIComponent(t.q)}&nums=1&timestamp=0&is_need_mean=1`,{mode:"cors"}).then(t=>t.json());n.message.length>0&&(e.to=n.message[0].paraphrase||n.message[0].means.reduce((t,e)=>t+e.part+" "+e.means.join(","),"")),e._raw=n}return e}];async function J(t){return fetch(t,{responseType:"blob"}).then(t=>t.blob()).then(t=>new Promise(e=>{let n=new FileReader;n.onloadend=function(t){const n=t.target.result;e(n)},n.readAsDataURL(t)}))}const P={};function R(t,e,n){let o=t=>{t&&t.error&&l.$emit("error",t),n(t)};return g()?(P[e.reqId||e.cmd]=o,chrome.runtime.sendMessage(t,e,o)):F(t,e,o)}g()&&(window.onMessageListener=function(t,e,n){if(t&&t.cmd){let e=P[t.reqId||t.cmd];e&&e(t.contents)}n(t.contents)},chrome.runtime.onMessage.addListener(window.onMessageListener));let $={token:(t,e)=>{var n="token "+t.content;fetch("https://api.github.com/user",{method:"get",headers:{accept:"application/vnd.github.v3+json",Authorization:n}}).then(t=>t.json()).then(n=>{n.name&&c.a.set("token",t.content),e(n)})},lists:async(t,e)=>{let n={},o=0;if(await async function(t,e,n){let o=(new Date).getTime();if(!B()["show"+t])return;let r="_"+t,i=c.a.get(r)||0;(e||o-i>18e5)&&(await n(),c.a.set(r,o))}(t.type,t.force,()=>{o++,setTimeout(()=>{(async()=>{await K[t.type](t,e),o--,e({done:!o})})()},1e3)}),t.type==O){let e=et(t.type)||[];for(let t=0,n=e.length;t<n;t++)e[t].i||e[t].n||(e.splice(t,1),n--,t--);tt(t.type,e)}n.contents=et(t.type)||[],n.done=!o,e(n)},newWord:async(t,e)=>{let n={};if(t.content.q=t.content.q.trim(),!t.content.q)return n.error="empty word",void e(n);let o=et(O)||[],r=et(M)||[],i=t.content.q.toLocaleLowerCase(),a=[r,o];for(let t=0;t<a.length;t++){let e=a[t];for(var s=0,c=e.length;s<c;s++)if(e[s].q==i){e.splice(s,1),s--,c--,1==t&&tt(O,o),t=a.length;break}}r.unshift(Object.assign({},t.content,{q:i}));try{tt(M,r,1)}catch(t){alert(t)}n.contents=t.content,e(n)},translate:(t,e)=>{let n=[];U.map(o=>o(t.content).then(o=>{n.push(o),o&&o._raw&&t.config&&t.config.tranUrl&&(async()=>{delete o._raw.logid;let e=j.compress(JSON.stringify(o._raw),9);e=x.bytesToBase64(new Uint8Array(e)),await fetch(t.config.tranUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({item:t.content,resp:o,enc:JSON.stringify({anc:e})})})})(),e(n)}))},bg:t=>{t.pause||(N.currentTime=0)},audio:(t,e)=>{if(t.pause)return D.pause(),e({}),!1;D.title=t.content.trim(),q.title=D.title;let n=`https://fanyi.baidu.com/gettts?lan=${t.lang||"en"}&text=${encodeURIComponent(t.content)}&spd=5&source=web&cache=0`;return D.src=n,D.load(),N.pause(),D.play(),t.wait?(D.onerror=D.onended=function(){N.play(),e({})},!0):(e({}),!1)},setConfig:(t,e)=>{c.a.set("config",t.content),e(B())},getConfig:(t,e)=>{e(B())},content:(t,e)=>{!async function(t,e){await E(k,"data",t.content.p).then(t=>{let n=H(t);n=Y(t),e({content:n})})}(t,e)},urls:(t,e)=>{!async function(t,e){await E(k,"data",t.content.p,0,t.content.cache).then(t=>{let n=A.ungzip(window.atob(t),{to:"string"});e({content:T(n)})})}(t,e)},upload:(t,e)=>{(async()=>{try{let n=k,o="data",r="dict.js";for(let e=0;e<t.content.length;e++){let r=t.content[e];if("http"==r.img.substring(0,4)){let t=await J(r.img);r.img="img/"+btoa(r.img)+"."+t[0],await W(n,o,r.img,t[1],0)}}let i=`\n          cb("${btoa(A.gzip(JSON.stringify(t.content),{to:"string",level:9}))}");\n          `;await W(n,o,r,i,0),e(t.content)}catch(t){return e("error")}})()}};function B(){return c.a.get("config")||{}}function F(t,e,n){let o=o=>{g()?chrome.tabs.sendMessage(t.tab.id,{cmd:e.cmd,reqId:e.reqId,contents:o},(function(t){})):n(o)};return $[e.cmd]&&(async()=>{await $[e.cmd](e,o)})(),!0}async function E(t,e,n,o,r){let i=c.a.get("token");var a="token "+i;let s={accept:"application/vnd.github.v3+json"};i&&(s.Authorization=a);let l=`https://api.github.com/repos/${t}/${e}/contents/${n}`+(o?"?ref="+o:"");return l+=r?(l.indexOf("?")>-1?"&":"?")+"cache="+r:"",(await fetch(l,{method:"get",headers:s}).then(t=>t.json())).content}async function V({name:t,rep:e,path:n,since:o},r,i=!0){var a=`https://api.github.com/repos/${t}/${e}/commits?path=${encodeURIComponent(n)}&per_page=100`;o&&(a+="&since="+encodeURIComponent(o));let s=c.a.get("token");var l="token "+s;let u={accept:"application/vnd.github.v3+json"};s&&(u.Authorization=l);let d=1,p=[];for(;;){let t=await fetch(a+"&page="+d,{method:"get",headers:u}).then(t=>t.json());if(p.push(...t),t.length<100)break;d++}for(let o=0;o<p.length;o++){let a=p[o],s=await E(t,e,n,a.sha);if(await r(a,i?H(s):s,o))return}return p}async function W(t,e,n,o,r){let i=c.a.get("token");var a="token "+i,s=`https://api.github.com/repos/${t}/${e}/contents/${n}`;if(!i)return{error:"token?"};let l=await fetch(s,{method:"get",headers:{accept:"application/vnd.github.v3+json"}}).then(t=>t.json()),u=l.sha;return l=await fetch(s,{method:"put",body:JSON.stringify({message:"update"+new Date,branch:"main",content:Q(r?X(o):o),sha:u}),headers:{accept:"application/vnd.github.v3+json",Authorization:a}}).then(t=>t.json()),l}async function G(){let t=et("videos")||[];if(!c.a.get("token"))return t;let e=t.reduce((t,e)=>(t[e.vid]=1,t),{}),n=await async function(){let t=(new Date).getTime(),e=Object.keys(I.mods.videos.m),n=[];for(let o=0;o<e.length;o++){let r=e[o],i=I.mods.videos.m[r].res;for(let e=0;e<i.length;e++){let o=i[e];for(let e=0;e<o.urls.length;e++)try{let i=o.urls[e],a=await I.crossOrigs(o.crossOrig,i+"?t="+t,o.type);n.push(...await o.conv(a,r))}catch(t){}}}let o=[];return n.reduce((t,e)=>(t[e.vid]||(t[e.vid]=1,o.push(e)),t),{}),o}();for(let o=0;o<n.length;o++){let r=n[o];e[r.vid]||t.unshift(r)}return t.sort((t,e)=>e.dt-t.dt),t.length=Math.min(500,t.length),tt("videos",t),t}function Q(t){return btoa(unescape(encodeURIComponent(t)))}function H(t){return decodeURIComponent(escape(atob(t)))}const K={words:async(t,e)=>{let n=B(),o=k,r="data",i="update.json",a=t.type+"Since",s=et(O)||[],l=et(M)||[],u=c.a.get(a),d=u,p=l.filter(t=>!t.i&&t.n||t.i&&!t.n).map(t=>{for(let e in t)"_"==e[0]&&delete t[e];return t}),m=[],h={};for(var g=0;g<10;g++){let t=d;try{await V({name:o,rep:r,path:i,since:t},(e,n,o)=>{0==o&&(u=e.commit.committer.date);let r=T(n);t=e.commit.committer.date,m.push(...r)});break}catch(t){h.error=t,await new Promise(t=>setTimeout(t,3e3))}}s.unshift(...m);let f={},y=[l,s];for(let t=0;t<y.length;t++){let e=y[t];for(let t=0,n=e.length;t<n;t++){let o=e[t];o.q&&!f[o.q]&&o.n||(e.splice(t,1),n--,t--),f[o.q]=(f[o.q]||0)+1}}tt(O,s),tt(M,l,1);let v=l.concat(s);if(u&&c.a.set(a,new Date(new Date(u).getTime()+1e3).toISOString()),n.fzWords>0&&p.length>n.fzWords){let t=p.map(t=>Object.assign({},t,{i:1})),e=JSON.stringify(t);if(t.length>0){let n=await W(o,r,i,e);h.error=n.error,n.commit&&(c.a.set(a,new Date(new Date(n.commit.committer.date).getTime()+1e3).toISOString()),s.unshift(...t),tt(O,s),l.length=0,tt(M,l,1),v=s)}}h.contents=v,e(h)},news:async(t,e)=>{let n=t.type+"Since",o=c.a.get(n),r=et(t.type)||[],i=[],a=await V({name:"SMLOG",rep:"data",path:"l.json",since:o},(t,e,n)=>{if(0==n&&(o=t.commit.committer.date),!e)return;let r=Z(e),a=T(r);return i.push(...a),i.length>500||void 0},!1),s=r.reduce((t,e)=>(t[e.p]=1,t),{});r.unshift(...i.filter(t=>!s[t.p])),r.sort((t,e)=>parseInt(e.date)-parseInt(t.date)),c.a.set(n,o);let l={};l.error=a.message,l.contents=r,r.length=Math.min(500,r.length),tt(t.type,r),e(l)},videos:async(t,e)=>{let n,o=k,r="data",i="v1.json",a=await G(),s=t.type+"Since",l=c.a.get(s),u=[],d=B();0==a.length&&(l=0),e({contents:a});try{await V({name:o,rep:r,path:i,since:l},(t,e,n)=>{0==n&&(l=t.commit.committer.date);let o=e;if(!o)return;o=Z(e);let r=T(o);u.push(...r)},0),a.unshift(...u);let e={};for(let t=0,n=a.length;t<n;t++)e[a[t].vid]?(a.splice(t,1),t--,n--):e[a[t].vid]=1;a.sort((t,e)=>e.dt-t.dt),tt(t.type,a),l&&c.a.set(s,new Date(new Date(l).getTime()+1e3).toISOString());let p=(new Date).getTime()-432e6,m=a.filter(t=>!t.i&&t.dt>p);if(d.fzVideos>0&&m.length>=d.fzVideos){let e=await W(o,r,i,JSON.stringify(m.map(t=>{for(let e in t)"_"==e[0]&&delete t[e];return Object.assign({i:1},t)})),1);e.commit&&(m.map(t=>t.i=1),tt(t.type,a),c.a.set(s,new Date(new Date(e.commit.committer.date).getTime()+1e3).toISOString())),n=e.error}}catch(t){n=t}e({error:n,contents:a})}};function Y(t){return A.ungzip(t,{to:"string"})}function X(t){return A.gzip(t,{to:"string"})}function Z(t){let e;try{e=H(t)}catch(n){e=atob(t)}try{e=Y(e)}catch(t){}return e}function tt(t,e,n){localStorage.setItem(t,n?JSON.stringify(e):A.gzip(JSON.stringify(e),{to:"string",level:9}))}function et(t){let e=localStorage.getItem(t);return e&&T("["==e[0]?e:A.ungzip(localStorage.getItem(t),{to:"string"}))}}});